---
import ThemeIcon from '@components/ThemeIcon.astro';
import { headerMenu } from '@utils/menu';

// Normalize URL path by ensuring trailing slash
const normalizeUrl = (url: string) => (url.endsWith('/') ? url : url + '/');
const activePage = normalizeUrl(Astro.url.pathname);
---

<header
  class="flex md:flex-row flex-col md:justify-between items-center md:items-center gap-4 mx-auto mt-16 mb-8 px-6 max-w-4xl"
>
  <!-- Logo: centered on mobile, left on md+ -->
  <div
    class="flex flex-shrink-0 justify-center md:justify-start w-full md:w-auto uppercase"
  >
    <a
      href="/"
      target="_self"
      class="flex items-center gap-4 text-lg lg:text-2xl"
    >
      <div class="w-12 lg:w-16 h-12 lg:h-16">
        <img
          src="/images/about-me-aipg.jpg"
          alt="A AI generate picture of Carsten Brüggenolte"
          width="1024"
          height="1024"
          loading="lazy"
          decoding="async"
          class="shadow-lg border-2 rounded-lg w-full h-full object-cover"
        />
      </div>
      <div class="leading-tight">
        <div class="inline">C</div>arsten<br />
        <div class="inline">B</div>rüggenolte
      </div>
    </a>
  </div>
  <!-- Navigation: centered on mobile, right on md+ -->
  <nav class="flex justify-center md:justify-end w-full md:w-auto">
    <ul class="flex md:flex-row flex-col items-center gap-2 md:gap-4 text-xl">
      {
        headerMenu.map((item, index) => (
          <li class="inline-block text-lg lg:text-xl">
            <a
              href={item.href}
              target="_self"
              class={`${activePage === item.href ? 'underline font-medium' : ''} hover:underline px-3 py-2 transition duration-200`}
            >
              {item.name}
            </a>
          </li>
        ))
      }
    </ul>
  </nav>
</header>
